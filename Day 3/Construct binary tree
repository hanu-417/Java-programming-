class Solution {

    //  we will make the root frm the preorder
    // and have to check which is in right or which one is in left from inorder
    
    // example
    // preoder = 1 2 4 8 9 10 11 5 3 6 7  root le ri
    // inorder = 8 4 10 9 11 2 5 1 6 3 7  le root ri

    Map<Integer,Integer> inorderMap;
    int preIndex=0;

     public TreeNode buildTree(int[] preorder, int[] inorder) {
        int n = preorder.length;
        if (n == 0) return null;

        inorderMap = new HashMap<>();
        for(int i=0; i<n; i++){
            inorderMap.put(inorder[i], i);
        }

        return build(preorder, 0, n - 1);
    }

    private TreeNode build(int[] preorder, int inStart, int inEnd) {
        if (inStart > inEnd) return null;

        TreeNode curr = new TreeNode(preorder[preIndex++]);

        int inIndex = inorderMap.get(curr.val);

        curr.left = build(preorder, inStart, inIndex - 1);
        curr.right = build(preorder, inIndex + 1, inEnd);

        return curr;
    }
}
